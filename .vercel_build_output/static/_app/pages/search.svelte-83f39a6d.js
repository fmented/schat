import{S as V,i as j,s as C,e as g,w as H,k as I,c as $,a as S,x as J,m as L,d as _,b as h,g as w,y as K,J as d,q as k,o as A,B as M,t as N,h as T,L as D,M as F,n as z,p as G,U as Q,N as W,K as X}from"../chunks/vendor-1841b722.js";import{s as Y,A as Z}from"../chunks/index-a1babe66.js";import{L as ee}from"../chunks/ListItem-6704c923.js";function P(i,e,s){const a=i.slice();return a[5]=e[s],a}function R(i){let e,s,a,f,u;return s=new ee({props:{img:i[5].avatar,text:{small:i[5].bio,strong:i[5].username}}}),{c(){e=g("a"),H(s.$$.fragment),a=I(),this.h()},l(c){e=$(c,"A",{href:!0,class:!0});var o=S(e);J(s.$$.fragment,o),a=L(o),o.forEach(_),this.h()},h(){h(e,"href",f="/chat/"+i[5].username),h(e,"class","svelte-1sc0xhy")},m(c,o){w(c,e,o),K(s,e,null),d(e,a),u=!0},p(c,o){const m={};o&1&&(m.img=c[5].avatar),o&1&&(m.text={small:c[5].bio,strong:c[5].username}),s.$set(m),(!u||o&1&&f!==(f="/chat/"+c[5].username))&&h(e,"href",f)},i(c){u||(k(s.$$.fragment,c),u=!0)},o(c){A(s.$$.fragment,c),u=!1},d(c){c&&_(e),M(s)}}}function te(i){let e,s,a,f,u,c,o,m,E,p,b,U,x,v=i[0],r=[];for(let t=0;t<v.length;t+=1)r[t]=R(P(i,v,t));const O=t=>A(r[t],1,1,()=>{r[t]=null});return{c(){e=g("div"),s=g("label"),a=N("Search"),f=I(),u=g("input"),c=I(),o=g("button"),m=N("Search"),E=I(),p=g("div");for(let t=0;t<r.length;t+=1)r[t].c();this.h()},l(t){e=$(t,"DIV",{class:!0});var l=S(e);s=$(l,"LABEL",{for:!0,class:!0});var n=S(s);a=T(n,"Search"),n.forEach(_),f=L(l),u=$(l,"INPUT",{type:!0,id:!0,class:!0}),c=L(l),o=$(l,"BUTTON",{class:!0});var y=S(o);m=T(y,"Search"),y.forEach(_),l.forEach(_),E=L(t),p=$(t,"DIV",{class:!0});var B=S(p);for(let q=0;q<r.length;q+=1)r[q].l(B);B.forEach(_),this.h()},h(){h(s,"for","search"),h(s,"class","svelte-1sc0xhy"),h(u,"type","search"),h(u,"id","search"),h(u,"class","svelte-1sc0xhy"),o.disabled=i[2],h(o,"class","svelte-1sc0xhy"),h(e,"class","sd svelte-1sc0xhy"),h(p,"class","svelte-1sc0xhy")},m(t,l){w(t,e,l),d(e,s),d(s,a),d(e,f),d(e,u),D(u,i[1]),d(e,c),d(e,o),d(o,m),w(t,E,l),w(t,p,l);for(let n=0;n<r.length;n+=1)r[n].m(p,null);b=!0,U||(x=[F(u,"input",i[4]),F(o,"click",i[3])],U=!0)},p(t,[l]){if(l&2&&D(u,t[1]),(!b||l&4)&&(o.disabled=t[2]),l&1){v=t[0];let n;for(n=0;n<v.length;n+=1){const y=P(t,v,n);r[n]?(r[n].p(y,l),k(r[n],1)):(r[n]=R(y),r[n].c(),k(r[n],1),r[n].m(p,null))}for(z(),n=v.length;n<r.length;n+=1)O(n);G()}},i(t){if(!b){for(let l=0;l<v.length;l+=1)k(r[l]);b=!0}},o(t){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)A(r[l]);b=!1},d(t){t&&_(e),t&&_(E),t&&_(p),Q(r,t),U=!1,W(x)}}}function se(i,e,s){let a=[],f="",u=!1;async function c(){if(!f)return;s(2,u=!0);const m=await Y(Z.AUTH_FIND,{username:f});m.ok&&s(0,a=await m.json()),s(2,u=!1)}function o(){f=this.value,s(1,f)}return[a,f,u,c,o]}class ae extends V{constructor(e){super();j(this,e,se,te,C,{})}}function re(i){let e,s;return e=new ae({}),{c(){H(e.$$.fragment)},l(a){J(e.$$.fragment,a)},m(a,f){K(e,a,f),s=!0},p:X,i(a){s||(k(e.$$.fragment,a),s=!0)},o(a){A(e.$$.fragment,a),s=!1},d(a){M(e,a)}}}const ce=async({session:i})=>i.user?{}:{status:301,redirect:"/"};class ie extends V{constructor(e){super();j(this,e,null,re,C,{})}}export{ie as default,ce as load};
